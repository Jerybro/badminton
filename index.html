<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="/badminton/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="羽球场地排队系统" />
    <link rel="manifest" href="/badminton/manifest.json" />
    <title>羽球排队</title>
  </head>
  <body>
    <noscript>您需要启用 JavaScript 才能运行此应用。</noscript>
    <div id="root"></div>
    <script>
      // 动态加载 CSS
      fetch('/badminton/asset-manifest.json')
        .then(response => response.json())
        .then(data => {
          const link = document.createElement('link');
          link.rel = 'stylesheet';
          link.href = data.files['main.css'];
          document.head.appendChild(link);
        });

      // 动态加载 React
      const loadScript = (src) => {
        return new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = src;
          script.onload = resolve;
          script.onerror = reject;
          document.body.appendChild(script);
        });
      };

      // 按顺序加载依赖
      Promise.all([
        loadScript('https://unpkg.com/react@18/umd/react.production.min.js'),
        loadScript('https://unpkg.com/react-dom@18/umd/react-dom.production.min.js')
      ]).then(() => {
        // 加载主应用代码
        fetch('/badminton/asset-manifest.json')
          .then(response => response.json())
          .then(data => {
            loadScript(data.files['main.js']);
          });
      });
    </script>
  </body>
</html> 